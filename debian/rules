#!/usr/bin/make -f

# rules for Debian packaging of libcmp (cmpossl)

CC=$(DEB_HOST_GNU_TYPE)-gcc
CXX=$(DEB_HOST_GNU_TYPE)-g++
AR=$(DEB_HOST_GNU_TYPE)-ar

%:
	dh $@

# prevent trying to use "cmake"
override_dh_auto_configure:
	ln -s Makefile_v1 Makefile

# make sure that Makefile_v1 is used
override_dh_auto_clean:
	make -f Makefile_v1 clean

override_dh_auto_build:
#	CFLAGS="-O2 -DNDEBUG" CXXFLAGS="-O2 -DNDEBUG" DEBUG_FLAGS="" LDFLAGS=""  # can be used to avoid dependency on libasan and libubsan
	OPENSSL_DIR=/usr CC=$(CC) CXX=$(CXX) AR=$(AR) \
	  dh_auto_build  -- -f Makefile_v1 OPENSSL_DIR="$(OPENSSL_DIR)" # may add further 'make' options here

#override_dh_builddeb:
#	dh_builddeb --destdir . --

override_dh_auto_install:
	dh_auto_install --destdir debian/tmp -- -f Makefile_v1

override_dh_shlibdeps:
	dh_shlibdeps --dpkg-shlibdeps-params="--ignore-missing-info"

override_dh_auto_test:
# do not run any tests

